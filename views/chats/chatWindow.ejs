<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/images/galaxy.png">
    <link rel="stylesheet" href="/styles/chat.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <title>NOVA</title>
    
</head>
<body>
    <div class="chat_window">
        <div class="top_menu d-flex">
            <div class="avatar">
                <img src="<%= peer.avatar %>" alt="avatar" id="profileImg">
            </div>
            <div class="title"><%= peer.name %> </div>
        </div>
        <ul class="messages msgList">
            <% for(msg of chats) {%>
                <% if(msg.data.sender === host.username) {%>
                    <div class="msgContainer d-flex my-1 flex-column align-items-end">
                        <div class="rightMsg">
                            <p><%= msg.data.message %> </p>
                        </div>
                    </div>
                    <% } else { %> 
                        <div class="msgContainer d-flex  my-1 flex-column align-items-start">
                            <div class="leftMsg">
                                <p><%= msg.data.message %> </p>
                            </div>
                        </div>
                    <% } %>   
                <% } %>
        </ul>
        <div class="bottom_wrapper clearfix">
            <div class="message_input_wrapper">
                <input class="message_input" placeholder="Type your message here..." id="PeerMessage" />
            </div>
            <div class="send_message" onclick="send()">
                <div class="icon"></div>
                <div class="text">Send</div>
            </div>
        </div>
    </div>
    
    <script>
        const hostData = '<%- JSON.stringify(host) %>';
        const peerData = '<%- JSON.stringify(peer) %>';
        const RTMtoken = '<%- RTMtoken %>';
    </script>
    <script src="/agora_sdk/agora-rtm-sdk-1.4.3.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-firestore.js"></script>
    <script src= "/chats/chatWindow.js"></script>
</body>
</html>
